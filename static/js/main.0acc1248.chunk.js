(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],{32:function(e,t,l){e.exports=l(48)},47:function(e,t,l){},48:function(e,t,l){"use strict";l.r(t);var r=l(0),n=l.n(r),a=l(18),o=l.n(a),s=l(13),i=l(14),c=l(5),u=l(16),h=l(6),d=l(7),p=l(10),f=l(9),v=l(8),g=l(11),y=l.n(g),b=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"renderCellMainValue",value:function(){if(this.props.cell.value)return n.a.createElement("span",{className:"cell-main-value"},this.props.cell.value)}},{key:"shouldHighlightMatching",value:function(e){return this.props.highlightMatching&&e===this.props.highlightMatching}},{key:"renderCellCornerValues",value:function(){var e=this;if(!this.props.cell.value){var t=Array.from(this.props.cell.cornerValues).sort().map((function(t){var l=e.shouldHighlightMatching(t)?"matching":"";return n.a.createElement("span",{className:l,key:"corner-"+e.props.cell.id+"-"+t},t)}));return n.a.createElement("span",{className:"cell-corner-value"},t)}}},{key:"renderCellCenterValues",value:function(){var e=this;if(!this.props.cell.value){var t=Array.from(this.props.cell.centerValues).sort().map((function(t){var l=e.shouldHighlightMatching(t)?"matching":"";return n.a.createElement("span",{className:l,key:"center-"+e.props.cell.id+"-"+t},t)}));return n.a.createElement("span",{className:"cell-center-value"},t)}}},{key:"render",value:function(){var e=["cell"];return this.props.cell.isRegionTop()&&e.push("region-top"),this.props.cell.isRegionLeft()&&e.push("region-left"),this.props.cell.isBoardLeft()&&e.push("board-left"),this.props.cell.isBoardRight()&&e.push("board-right"),this.props.cell.isBoardTop()&&e.push("board-top"),this.props.cell.isBoardBottom()&&e.push("board-bottom"),this.props.cell.selected?e.push("selected"):this.shouldHighlightMatching(this.props.cell.value)?e.push("matching"):this.props.cell.restricted&&e.push("restricted"),this.props.cell.error&&e.push("error"),n.a.createElement("div",{className:e.join(" "),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseOver:this.props.onMouseOver,key:this.props.cell.id},this.renderCellMainValue(),this.renderCellCornerValues(),this.renderCellCenterValues())}}]),l}(n.a.Component),C=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"renderCell",value:function(e){var t=this;return n.a.createElement(b,{cell:this.props.board.cells[e],onClick:function(l){return t.props.onClick(l,e)},onMouseDown:function(l){return t.props.onMouseDown(l,e)},onMouseOver:function(){return t.props.onMouseOver(e)},key:String(e),highlightMatching:this.props.highlightMatching})}},{key:"renderRow",value:function(e){for(var t=[],l=e;l<e+9;l++)t.push(this.renderCell(l));return n.a.createElement("div",{className:"row",key:e},t)}},{key:"render",value:function(){for(var e=[],t=0;t<81;t+=9)e.push(this.renderRow(t));return n.a.createElement("div",null,e)}}]),l}(n.a.Component),k=l(17),O=l(12),m=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"display-options"},n.a.createElement("h4",null,"Display Options"),n.a.createElement(O.a.Check,{type:"checkbox",id:"checkbox-highlight-restricted",label:"Highlight restricted cells",checked:this.props.highlightRestricted,onChange:function(){return e.props.updateDisplay(Object(c.a)(Object(c.a)({},e.props),{},{highlightRestricted:!e.props.highlightRestricted}))}}),n.a.createElement(O.a.Check,{type:"checkbox",id:"checkbox-highlight-matching-numbers",label:"Highlight matching numbers",checked:this.props.highlightMatchingNumbers,onChange:function(){return e.props.updateDisplay(Object(c.a)(Object(c.a)({},e.props),{},{highlightMatchingNumbers:!e.props.highlightMatchingNumbers}))}}),n.a.createElement(O.a.Check,{type:"checkbox",id:"checkbox-auto-cleanup",label:"Auto Cleanup corner & center values",checked:this.props.autoCleanUp,onChange:function(){return e.props.updateDisplay(Object(c.a)(Object(c.a)({},e.props),{},{autoCleanUp:!e.props.autoCleanUp}))}}))}}]),l}(n.a.Component),E=Object(s.b)((function(e){return Object(c.a)({},e.control.displayOptions)}),{updateDisplay:function(e){return{type:"ACTION_UPDATE_DISPLAY",payload:e}}})(m),V=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"game-play"},n.a.createElement("h4",null,"Game Play"),n.a.createElement(O.a.Check,{type:"checkbox",id:"checkbox-anti-knight",label:"Anti Knight",checked:this.props.antiKnight,onChange:function(){return e.props.updateGamePlay(Object(c.a)(Object(c.a)({},e.props),{},{antiKnight:!e.props.antiKnight}))}}),n.a.createElement(O.a.Check,{type:"checkbox",id:"checkbox-anti-king",label:"Anti King",checked:this.props.antiKing,onChange:function(){return e.props.updateGamePlay(Object(c.a)(Object(c.a)({},e.props),{},{antiKing:!e.props.antiKing}))}}))}}]),l}(n.a.Component),S=Object(s.b)((function(e){return Object(c.a)({},e.control.gamePlay)}),{updateGamePlay:function(e){return{type:"ACTION_UPDATE_GAME_PLAY",payload:e}}})(V),j=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"render",value:function(){return n.a.createElement(O.a,null,n.a.createElement("div",{className:""},n.a.createElement(k.a,{onClick:this.props.onClickVerify},"Verify"),"\xa0",n.a.createElement(k.a,{onClick:this.props.onClickUndo,className:"btn-secondary"},"Undo"),"\xa0",n.a.createElement(k.a,{onClick:this.props.onClickRedo,className:"btn-secondary"},"Redo")),n.a.createElement("hr",null),n.a.createElement(E,null),n.a.createElement("hr",null),n.a.createElement(S,null),n.a.createElement("hr",null),n.a.createElement("h4",null,"Help"),n.a.createElement(k.a,{onClick:this.props.onClickFillCenters,className:"btn-secondary"},"Fill all center values"))}}]),l}(n.a.Component),A=function(e){Object(p.a)(l,e);var t=Object(f.a)(l);function l(){return Object(h.a)(this,l),t.apply(this,arguments)}return Object(d.a)(l,[{key:"undo",value:function(){0!==this.props.history.id&&this.props.undo(this.props.history.boards[this.props.history.id-1])}},{key:"redo",value:function(){this.props.history.id>=this.props.history.boards.length-1||this.props.redo(this.props.history.boards[this.props.history.id+1])}},{key:"clearSelectionAndRestricted",value:function(){console.log("clearSelectionAndRestricted");var e=y.a.cloneDeep(this.props.board);e.clearAllSelections(),e.clearAllRestricteds(),this.props.updateBoard(e),this.setState({highlightMatching:null})}},{key:"updateHighlightMatchingNumbers",value:function(){if(this.props.control.displayOptions.highlightMatchingNumbers){var e=new Set(this.props.board.cells.filter((function(e){return e.selected})).filter((function(e){return e.value})).map((function(e){return e.value})));if(1===e.size){var t=e.values().next().value;this.setState({highlightMatching:t})}}}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("select "+e);var l=y.a.cloneDeep(this.props.board);t?(l.clearAllSelections(),l.clearAllRestricteds()):l.clearAllRestricteds(),l.setSelected(e),this.props.control.displayOptions.highlightRestricted&&l.setRestricted(this.props.control.gamePlay),this.props.updateBoard(l)}},{key:"handleClick",value:function(e,t){console.log("handleClick "+t),this.select(t,!e.metaKey)}},{key:"handleMouseDown",value:function(e,t){console.log("handleMouseDown "+t),this.setState({isMouseDown:!0}),this.select(t,!e.metaKey)}},{key:"handleMouseOver",value:function(e){this.props.isMouseDown&&(console.log("handleMouseOver "+e),this.select(e,!1))}},{key:"handleMouseUp",value:function(){console.log("handleMouseUp"),this.setState({isMouseDown:!1})}},{key:"setValueOfSelectedCells",value:function(e){console.log("setValueOfSelectedCells "+e),this.clearAllError();var t=y.a.cloneDeep(this.props.board);t.setValueOfSelectedCells(e,this.props.control.gamePlay,this.props.control.displayOptions.autoCleanUp),this.props.updateBoard(t),this.updateHighlightMatchingNumbers()}},{key:"unsetSelectedCells",value:function(){console.log("unsetSelectedCells"),this.clearAllError();var e=y.a.cloneDeep(this.props.board);e.unsetSelectedCells(),this.props.updateBoard(e)}},{key:"toggleCornerValuesOfSelectedCells",value:function(e){console.log("toggleCornerValuesOfSelectedCells "+e);var t=y.a.cloneDeep(this.props.board);t.toggleCornerValuesOfSelectedCells(e),this.props.updateBoard(t)}},{key:"clearCornerValuesOfSelectedCells",value:function(){console.log("clearCornerValuesOfSelectedCells");var e=y.a.cloneDeep(this.props.board);e.clearCornerValuesOfSelectedCells(),this.props.updateBoard(e)}},{key:"toggleCenterValuesOfSelectedCells",value:function(e){console.log("toggleCenterValuesOfSelectedCells "+e);var t=y.a.cloneDeep(this.props.board);t.toggleCenterValuesOfSelectedCells(e),this.props.updateBoard(t)}},{key:"clearCenterValuesOfSelectedCells",value:function(){console.log("clearCenterValuesOfSelectedCells");var e=y.a.cloneDeep(this.props.board);e.clearCenterValuesOfSelectedCells(),this.props.updateBoard(e)}},{key:"clearAllError",value:function(){console.log("clearAllError");var e=y.a.cloneDeep(this.props.board);e.clearAllErrors(),this.props.updateBoard(e)}},{key:"verifyBoard",value:function(){console.log("verifyBoard");var e=y.a.cloneDeep(this.props.board);e.clearAllErrors();var t=e.getInvalidCellIds(this.props.control.gamePlay);e.setErrors(t),this.props.updateBoard(e),alert(t.size>0?"Error found :(":"LGTM!")}},{key:"moveSelection",value:function(e,t){for(var l=0,r=0,n=0;n<81;n++)if(this.props.board.cells[n].selected){var a=this.props.board.toRowCol(n),o=Object(u.a)(a,2);l=o[0],r=o[1];break}l=(l+e+9)%9,r=(r+t+9)%9,this.select(this.props.board.toCellId(l,r))}},{key:"handleKeyDown",value:function(e){console.log("handleKeyDown, keyCode = "+e.keyCode);var t=!!e.shiftKey,l=!!e.metaKey;if(e.keyCode>=v.a&&e.keyCode<=v.b){var r=String.fromCharCode(e.keyCode);t?this.toggleCornerValuesOfSelectedCells(r):l?(this.toggleCenterValuesOfSelectedCells(r),e.preventDefault()):this.setValueOfSelectedCells(r)}switch(e.keyCode){case v.i:this.unsetSelectedCells();break;case v.c:this.unsetSelectedCells(),this.clearCornerValuesOfSelectedCells(),this.clearCenterValuesOfSelectedCells(),e.preventDefault();break;case v.d:this.moveSelection(1,0);break;case v.k:this.moveSelection(-1,0);break;case v.f:this.moveSelection(0,-1);break;case v.h:this.moveSelection(0,1);break;case v.e:this.clearSelectionAndRestricted();break;case v.m:case v.j:this.undo();break;case v.l:case v.g:this.redo()}}},{key:"handleClickFillCenter",value:function(){console.log("handleClickFillCenter");var e=y.a.cloneDeep(this.props.board);e.fillAllPossibleValues(this.props.control.gamePlay),this.props.updateBoard(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{onKeyDown:function(t){return e.handleKeyDown(t)},tabIndex:0,className:"container",onMouseUp:function(){return e.handleMouseUp()}},n.a.createElement("h1",null,"Sudoku Tool"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm"},n.a.createElement(C,{board:this.props.board,onClick:function(t,l){return e.handleClick(t,l)},onMouseDown:function(t,l){return e.handleMouseDown(t,l)},onMouseOver:function(t){return e.handleMouseOver(t)},highlightMatching:this.props.highlightMatching})),n.a.createElement("div",{className:"col-sm"},n.a.createElement(j,{onClickVerify:function(){return e.verifyBoard()},onClickUndo:function(){return e.undo()},onClickRedo:function(){return e.redo()},onClickFillCenters:function(){return e.handleClickFillCenter()}}))))}}]),l}(n.a.Component),D=Object(s.b)((function(e){return Object(c.a)({},e)}),{redo:function(e){return{type:"ACTION_REDO",payload:{serialized:e}}},undo:function(e){return{type:"ACTION_UNDO",payload:{serialized:e}}},updateBoard:function(e){return{type:"ACTION_UPDATE_BOARD",payload:{board:e}}}})(A),w=function e(){Object(h.a)(this,e),this.displayOptions=void 0,this.gamePlay=void 0,this.displayOptions={highlightRestricted:!0,highlightMatchingNumbers:!1,autoCleanUp:!1},this.gamePlay={antiKnight:!1,antiKing:!1}},M=l(27),R=function(){function e(t){Object(h.a)(this,e),this.value=void 0,this.cornerValues=void 0,this.centerValues=void 0,this.selected=void 0,this.restricted=void 0,this.error=void 0,this.row=void 0,this.col=void 0,this.id=void 0,this.value=null,this.cornerValues=new Set,this.centerValues=new Set,this.selected=!1,this.restricted=!1,this.error=!1,this.row=~~(t/9),this.col=t%9,this.id=t}return Object(d.a)(e,[{key:"isRegionTop",value:function(){return this.row%3===0}},{key:"isRegionBottom",value:function(){return this.row%3===2}},{key:"isRegionLeft",value:function(){return this.col%3===0}},{key:"isRegionRight",value:function(){return this.col%3===2}},{key:"isBoardTop",value:function(){return 0===this.row}},{key:"isBoardBottom",value:function(){return 8===this.row}},{key:"isBoardLeft",value:function(){return 0===this.col}},{key:"isBoardRight",value:function(){return 8===this.col}}]),e}();function N(e,t){return new Set(Object(M.a)(e).filter((function(e){return t.has(e)})))}var B=function(){function e(){Object(h.a)(this,e),this.cells=void 0,this.cells=[];for(var t=0;t<81;t++)this.cells.push(new R(t))}return Object(d.a)(e,[{key:"serialize",value:function(){var e=[];return this.cells.forEach((function(t){e.push({value:t.value,cornerValues:Array.from(t.cornerValues),centerValues:Array.from(t.centerValues)})})),JSON.stringify(e)}},{key:"load",value:function(e){this.clearAllErrors(),this.clearAllRestricteds(),this.clearAllSelections();for(var t=JSON.parse(e),l=0;l<81;l++)this.cells[l].value=t[l].value,this.cells[l].cornerValues=new Set(t[l].cornerValues),this.cells[l].centerValues=new Set(t[l].centerValues)}},{key:"isInside",value:function(e,t){return 0<=e&&e<9&&0<=t&&t<9}},{key:"toCellId",value:function(e,t){return 9*e+t}},{key:"toRowCol",value:function(e){return[~~(e/9),e%9]}},{key:"getRegionByPosition",value:function(e,t){return 3*~~(e/3)+~~(t/3)}},{key:"getRegion",value:function(e){var t=this.toRowCol(e),l=Object(u.a)(t,2),r=l[0],n=l[1];return this.getRegionByPosition(r,n)}},{key:"getVisibleCells",value:function(e,t){for(var l=this.toRowCol(e),r=Object(u.a)(l,2),n=r[0],a=r[1],o=new Set,s=0;s<9;s++)o.add(this.toCellId(n,s));for(var i=0;i<9;i++)o.add(this.toCellId(i,a));for(var c=this.getRegion(e),h=0;h<81;h++)this.getRegion(h)===c&&o.add(h);if(t.antiKnight)for(var d=-2;d<=2;d++)for(var p=-2;p<=2;p++)if(d*d+p*p===5){var f=n+d,v=a+p;this.isInside(f,v)&&o.add(this.toCellId(f,v))}if(t.antiKing)for(var g=-1;g<=1;g++)for(var y=-1;y<=1;y++){var b=n+g,C=a+y;this.isInside(b,C)&&o.add(this.toCellId(b,C))}return o.delete(e),o}},{key:"getInvalidCellIds",value:function(e){for(var t=this,l=new Set,r=function(r){var n=t.cells[r].value;n&&t.getVisibleCells(r,e).forEach((function(e){n===t.cells[e].value&&(l.add(r),l.add(e))}))},n=0;n<81;n++)r(n);return l}},{key:"getPossibleValues",value:function(e,t){var l,r,n=this,a=Array.from(this.getVisibleCells(e,t)).map((function(e){return n.cells[e].value})).filter((function(e){return e}));return l=new Set(["1","2","3","4","5","6","7","8","9"]),r=new Set(a),new Set(Object(M.a)(l).filter((function(e){return!r.has(e)})))}},{key:"fillAllPossibleValues",value:function(e){var t=this;this.cells.forEach((function(l){l.value||(l.centerValues=t.getPossibleValues(l.id,e))}))}},{key:"setSelected",value:function(e){this.cells[e].selected=!0}},{key:"setRestricted",value:function(e){for(var t=this,l=null,r=0;r<81;r++)this.cells[r].selected&&(l=null===l?this.getVisibleCells(r,e):N(this.getVisibleCells(r,e),l));l&&l.forEach((function(e){t.cells[e].restricted=!0}))}},{key:"setErrors",value:function(e){var t=this;e.forEach((function(e){t.cells[e].error=!0}))}},{key:"setValueOfSelectedCells",value:function(e,t){var l=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.cells.forEach((function(n){n.selected&&(n.value=e,r&&l.getVisibleCells(n.id,t).forEach((function(t){l.cells[t].cornerValues.delete(e),l.cells[t].centerValues.delete(e)})))}))}},{key:"unsetSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&(e.value=null)}))}},{key:"toggleCornerValuesOfSelectedCells",value:function(e){this.cells.forEach((function(t){t.selected&&(t.cornerValues.has(e)?t.cornerValues.delete(e):t.cornerValues.add(e))}))}},{key:"clearCornerValuesOfSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&e.cornerValues.clear()}))}},{key:"toggleCenterValuesOfSelectedCells",value:function(e){this.cells.forEach((function(t){t.selected&&(t.centerValues.has(e)?t.centerValues.delete(e):t.centerValues.add(e))}))}},{key:"clearCenterValuesOfSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&e.centerValues.clear()}))}},{key:"clearAllSelections",value:function(){this.cells.forEach((function(e){e.selected=!1}))}},{key:"clearAllRestricteds",value:function(){this.cells.forEach((function(e){e.restricted=!1}))}},{key:"clearAllErrors",value:function(){this.cells.forEach((function(e){e.error=!1}))}}]),e}(),I=l(26),P=l.n(I),T=function e(){Object(h.a)(this,e),this.boards=void 0,this.id=void 0,this.boards=[],this.id=0;var t=new B;this.boards.push(t.serialize())},U=Object(i.b)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new B,t=arguments.length>1?arguments[1]:void 0;if("ACTION_UPDATE_BOARD"===t.type)return t.payload.board;if("ACTION_UNDO"===t.type){var l=new B;return l.load(t.payload.serialized),l}if("ACTION_REDO"===t.type){var r=new B;return r.load(t.payload.serialized),r}return e},control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w,t=arguments.length>1?arguments[1]:void 0;return"ACTION_UPDATE_DISPLAY"===t.type?Object(c.a)(Object(c.a)({},e),{},{displayOptions:t.payload}):"ACTION_UPDATE_GAME_PLAY"===t.type?Object(c.a)(Object(c.a)({},e),{},{gamePlay:t.payload}):e},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new T,t=arguments.length>1?arguments[1]:void 0;if("ACTION_UPDATE_BOARD"===t.type){var l=t.payload.board.serialize();return l!==e.boards[e.id]&&(e.boards=e.boards.slice(0,e.id+1),e.boards.push(l),e.id+=1),e}return"ACTION_UNDO"===t.type?(P()(e.id>0),Object(c.a)(Object(c.a)({},e),{},{id:e.id-1})):"ACTION_REDO"===t.type?(P()(e.id+1<e.boards.length),Object(c.a)(Object(c.a)({},e),{},{id:e.id+1})):e},isMouseDown:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},highlightMatching:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e}});l(47);o.a.render(n.a.createElement(s.a,{store:Object(i.c)(U)},n.a.createElement(D,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.0acc1248.chunk.js.map