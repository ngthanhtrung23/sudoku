(this.webpackJsonpsudoku=this.webpackJsonpsudoku||[]).push([[0],{22:function(e,t,l){e.exports=l(31)},30:function(e,t,l){},31:function(e,t,l){"use strict";l.r(t);var n=l(12),i=l(6),s=l(7),o=l(9),a=l(8),r=l(0),c=l.n(r),h=l(20),u=l.n(h),g=l(5),d=function(e){Object(o.a)(l,e);var t=Object(a.a)(l);function l(){return Object(i.a)(this,l),t.apply(this,arguments)}return Object(s.a)(l,[{key:"renderCellMainValue",value:function(){if(this.props.cell.value)return c.a.createElement("span",{className:"cell-main-value"},this.props.cell.value)}},{key:"shouldHighlightMatching",value:function(e){return this.props.highlightMatching&&e===this.props.highlightMatching}},{key:"renderCellCornerValues",value:function(){var e=this;if(!this.props.cell.value){var t=Array.from(this.props.cell.cornerValues).sort().map((function(t){var l=e.shouldHighlightMatching(t)?"matching":"";return c.a.createElement("span",{className:l,key:"corner-"+e.props.cell.id+"-"+t},t)}));return c.a.createElement("span",{className:"cell-corner-value"},t)}}},{key:"renderCellCenterValues",value:function(){var e=this;if(!this.props.cell.value){var t=Array.from(this.props.cell.centerValues).sort().map((function(t){var l=e.shouldHighlightMatching(t)?"matching":"";return c.a.createElement("span",{className:l,key:"center-"+e.props.cell.id+"-"+t},t)}));return c.a.createElement("span",{className:"cell-center-value"},t)}}},{key:"render",value:function(){var e=["cell"];return this.props.cell.isRegionTop()&&e.push("region-top"),this.props.cell.isRegionLeft()&&e.push("region-left"),this.props.cell.isBoardLeft()&&e.push("board-left"),this.props.cell.isBoardRight()&&e.push("board-right"),this.props.cell.isBoardTop()&&e.push("board-top"),this.props.cell.isBoardBottom()&&e.push("board-bottom"),this.props.cell.selected?e.push("selected"):this.shouldHighlightMatching(this.props.cell.value)?e.push("matching"):this.props.cell.restricted&&e.push("restricted"),this.props.cell.error&&e.push("error"),c.a.createElement("div",{className:e.join(" "),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseOver:this.props.onMouseOver,key:this.props.cell.id},this.renderCellMainValue(),this.renderCellCornerValues(),this.renderCellCenterValues())}}]),l}(c.a.Component),f=function(e){Object(o.a)(l,e);var t=Object(a.a)(l);function l(){return Object(i.a)(this,l),t.apply(this,arguments)}return Object(s.a)(l,[{key:"renderCell",value:function(e){var t=this;return c.a.createElement(d,{cell:this.props.board.cells[e],onClick:function(l){return t.props.onClick(l,e)},onMouseDown:function(l){return t.props.onMouseDown(l,e)},onMouseOver:function(){return t.props.onMouseOver(e)},key:String(e),highlightMatching:this.props.highlightMatching})}},{key:"renderRow",value:function(e){for(var t=[],l=e;l<e+9;l++)t.push(this.renderCell(l));return c.a.createElement("div",{className:"row",key:e},t)}},{key:"render",value:function(){for(var e=[],t=0;t<81;t+=9)e.push(this.renderRow(t));return c.a.createElement("div",null,e)}}]),l}(c.a.Component),v=l(13),p=l(10),y=function(e){Object(o.a)(l,e);var t=Object(a.a)(l);function l(){return Object(i.a)(this,l),t.apply(this,arguments)}return Object(s.a)(l,[{key:"render",value:function(){return c.a.createElement(p.a,null,c.a.createElement("div",{className:""},c.a.createElement(v.a,{onClick:this.props.onClickVerify},"Verify"),"\xa0",c.a.createElement(v.a,{onClick:this.props.onClickUndo,className:"btn-secondary"},"Undo"),"\xa0",c.a.createElement(v.a,{onClick:this.props.onClickRedo,className:"btn-secondary"},"Redo")),c.a.createElement("hr",null),c.a.createElement("h4",null,"Display Options"),c.a.createElement(p.a.Check,{type:"checkbox",id:"checkbox-highlight-restricted",label:"Highlight restricted cells",checked:this.props.control.displayOptions.highlightRestricted,onChange:this.props.onToggleHighlightRestricted}),c.a.createElement(p.a.Check,{type:"checkbox",id:"checkbox-highlight-matching-numbers",label:"Highlight matching numbers",checked:this.props.control.displayOptions.highlightMatchingNumbers,onChange:this.props.onToggleHighlightMatchingNumbers}),c.a.createElement(p.a.Check,{type:"checkbox",id:"checkbox-auto-cleanup",label:"Auto Cleanup corner & center values",checked:this.props.control.displayOptions.autoCleanUp,onChange:this.props.onToggleAutoCleanUp}),c.a.createElement("hr",null),c.a.createElement("h4",null,"Game Play"),c.a.createElement(p.a.Check,{type:"checkbox",id:"checkbox-anti-knight",label:"Anti Knight",checked:this.props.control.gamePlay.antiKnight,onChange:this.props.onToggleAntiKnight}),c.a.createElement(p.a.Check,{type:"checkbox",id:"checkbox-anti-king",label:"Anti King",checked:this.props.control.gamePlay.antiKing,onChange:this.props.onToggleAntiKing}),c.a.createElement("hr",null),c.a.createElement("h4",null,"Help"),c.a.createElement(v.a,{onClick:this.props.onClickFillCenters,className:"btn-secondary"},"Fill all center values"))}}]),l}(c.a.Component),C=l(17),k=function(){function e(t){Object(i.a)(this,e),this.value=void 0,this.cornerValues=void 0,this.centerValues=void 0,this.selected=void 0,this.restricted=void 0,this.error=void 0,this.row=void 0,this.col=void 0,this.id=void 0,this.value=null,this.cornerValues=new Set,this.centerValues=new Set,this.selected=!1,this.restricted=!1,this.error=!1,this.row=~~(t/9),this.col=t%9,this.id=t}return Object(s.a)(e,[{key:"isRegionTop",value:function(){return this.row%3===0}},{key:"isRegionBottom",value:function(){return this.row%3===2}},{key:"isRegionLeft",value:function(){return this.col%3===0}},{key:"isRegionRight",value:function(){return this.col%3===2}},{key:"isBoardTop",value:function(){return 0===this.row}},{key:"isBoardBottom",value:function(){return 8===this.row}},{key:"isBoardLeft",value:function(){return 0===this.col}},{key:"isBoardRight",value:function(){return 8===this.col}}]),e}();function m(e,t){return new Set(Object(C.a)(e).filter((function(e){return t.has(e)})))}var b=function(){function e(){Object(i.a)(this,e),this.cells=void 0,this.cells=[];for(var t=0;t<81;t++)this.cells.push(new k(t))}return Object(s.a)(e,[{key:"serialize",value:function(){var e=[];return this.cells.forEach((function(t){e.push({value:t.value,cornerValues:Array.from(t.cornerValues),centerValues:Array.from(t.centerValues)})})),JSON.stringify(e)}},{key:"load",value:function(e){this.clearAllErrors(),this.clearAllRestricteds(),this.clearAllSelections();for(var t=JSON.parse(e),l=0;l<81;l++)this.cells[l].value=t[l].value,this.cells[l].cornerValues=new Set(t[l].cornerValues),this.cells[l].centerValues=new Set(t[l].centerValues)}},{key:"isInside",value:function(e,t){return 0<=e&&e<9&&0<=t&&t<9}},{key:"toCellId",value:function(e,t){return 9*e+t}},{key:"toRowCol",value:function(e){return[~~(e/9),e%9]}},{key:"getRegionByPosition",value:function(e,t){return 3*~~(e/3)+~~(t/3)}},{key:"getRegion",value:function(e){var t=this.toRowCol(e),l=Object(n.a)(t,2),i=l[0],s=l[1];return this.getRegionByPosition(i,s)}},{key:"getVisibleCells",value:function(e,t){for(var l=this.toRowCol(e),i=Object(n.a)(l,2),s=i[0],o=i[1],a=new Set,r=0;r<9;r++)a.add(this.toCellId(s,r));for(var c=0;c<9;c++)a.add(this.toCellId(c,o));for(var h=this.getRegion(e),u=0;u<81;u++)this.getRegion(u)===h&&a.add(u);if(t.antiKnight)for(var g=-2;g<=2;g++)for(var d=-2;d<=2;d++)if(g*g+d*d===5){var f=s+g,v=o+d;this.isInside(f,v)&&a.add(this.toCellId(f,v))}if(t.antiKing)for(var p=-1;p<=1;p++)for(var y=-1;y<=1;y++){var C=s+p,k=o+y;this.isInside(C,k)&&a.add(this.toCellId(C,k))}return a.delete(e),a}},{key:"getInvalidCellIds",value:function(e){for(var t=this,l=new Set,n=function(n){var i=t.cells[n].value;i&&t.getVisibleCells(n,e).forEach((function(e){i===t.cells[e].value&&(l.add(n),l.add(e))}))},i=0;i<81;i++)n(i);return l}},{key:"getPossibleValues",value:function(e,t){var l,n,i=this,s=Array.from(this.getVisibleCells(e,t)).map((function(e){return i.cells[e].value})).filter((function(e){return e}));return l=new Set(["1","2","3","4","5","6","7","8","9"]),n=new Set(s),new Set(Object(C.a)(l).filter((function(e){return!n.has(e)})))}},{key:"fillAllPossibleValues",value:function(e){var t=this;this.cells.forEach((function(l){l.value||(l.centerValues=t.getPossibleValues(l.id,e))}))}},{key:"setSelected",value:function(e){this.cells[e].selected=!0}},{key:"setRestricted",value:function(e){for(var t=this,l=null,n=0;n<81;n++)this.cells[n].selected&&(l=null===l?this.getVisibleCells(n,e):m(this.getVisibleCells(n,e),l));l&&l.forEach((function(e){t.cells[e].restricted=!0}))}},{key:"setErrors",value:function(e){var t=this;e.forEach((function(e){t.cells[e].error=!0}))}},{key:"setValueOfSelectedCells",value:function(e,t){var l=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.cells.forEach((function(i){i.selected&&(i.value=e,n&&l.getVisibleCells(i.id,t).forEach((function(t){l.cells[t].cornerValues.delete(e),l.cells[t].centerValues.delete(e)})))}))}},{key:"unsetSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&(e.value=null)}))}},{key:"toggleCornerValuesOfSelectedCells",value:function(e){this.cells.forEach((function(t){t.selected&&(t.cornerValues.has(e)?t.cornerValues.delete(e):t.cornerValues.add(e))}))}},{key:"clearCornerValuesOfSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&e.cornerValues.clear()}))}},{key:"toggleCenterValuesOfSelectedCells",value:function(e){this.cells.forEach((function(t){t.selected&&(t.centerValues.has(e)?t.centerValues.delete(e):t.centerValues.add(e))}))}},{key:"clearCenterValuesOfSelectedCells",value:function(){this.cells.forEach((function(e){e.selected&&e.centerValues.clear()}))}},{key:"clearAllSelections",value:function(){this.cells.forEach((function(e){e.selected=!1}))}},{key:"clearAllRestricteds",value:function(){this.cells.forEach((function(e){e.restricted=!1}))}},{key:"clearAllErrors",value:function(){this.cells.forEach((function(e){e.error=!1}))}}]),e}(),O=function(){function e(){Object(i.a)(this,e),this.displayOptions=void 0,this.gamePlay=void 0,this.displayOptions={highlightRestricted:!0,highlightMatchingNumbers:!1,autoCleanUp:!1},this.gamePlay={antiKnight:!1,antiKing:!1}}return Object(s.a)(e,[{key:"toggleHighlightRestricted",value:function(){this.displayOptions.highlightRestricted=!this.displayOptions.highlightRestricted}},{key:"toggleHighlightMatchingNumbers",value:function(){this.displayOptions.highlightMatchingNumbers=!this.displayOptions.highlightMatchingNumbers}},{key:"toggleAutoCleanUp",value:function(){this.displayOptions.autoCleanUp=!this.displayOptions.autoCleanUp}},{key:"toggleAntiKnight",value:function(){this.gamePlay.antiKnight=!this.gamePlay.antiKnight}},{key:"toggleAntiKing",value:function(){this.gamePlay.antiKing=!this.gamePlay.antiKing}}]),e}(),S=(l(30),function(e){Object(o.a)(l,e);var t=Object(a.a)(l);function l(e){var n;return Object(i.a)(this,l),(n=t.call(this,e)).state={board:new b,control:new O,history:[],historyId:0,isMouseDown:!1,highlightMatching:null},n.state.history.push(n.state.board.serialize()),n}return Object(s.a)(l,[{key:"assignNewBoard",value:function(e){var t=e.serialize(),l=this.state.history,n=this.state.historyId;t!==this.state.history[n]&&((l=l.slice(0,n+1)).push(t),n+=1),this.setState({board:e,history:l,historyId:n})}},{key:"undo",value:function(){if(0!==this.state.historyId){var e=new b;e.load(this.state.history[this.state.historyId-1]),this.setState({board:e,historyId:this.state.historyId-1})}}},{key:"redo",value:function(){if(!(this.state.historyId>=this.state.history.length-1)){var e=new b;e.load(this.state.history[this.state.historyId+1]),this.setState({board:e,historyId:this.state.historyId+1})}}},{key:"clearSelectionAndRestricted",value:function(){console.log("clearSelectionAndRestricted");var e=this.state.board;e.clearAllSelections(),e.clearAllRestricteds(),this.assignNewBoard(e),this.setState({highlightMatching:null})}},{key:"updateHighlightMatchingNumbers",value:function(){if(this.state.control.displayOptions.highlightMatchingNumbers){var e=new Set(this.state.board.cells.filter((function(e){return e.selected})).filter((function(e){return e.value})).map((function(e){return e.value})));if(1===e.size){var t=e.values().next().value;this.setState({highlightMatching:t})}}}},{key:"select",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("select "+e);var l=this.state.board;t?this.clearSelectionAndRestricted():l.clearAllRestricteds(),l.setSelected(e),this.state.control.displayOptions.highlightRestricted&&l.setRestricted(this.state.control.gamePlay),this.assignNewBoard(l),this.updateHighlightMatchingNumbers()}},{key:"handleClick",value:function(e,t){console.log("handleClick "+t),this.select(t,!e.metaKey)}},{key:"handleMouseDown",value:function(e,t){console.log("handleMouseDown "+t),this.setState({isMouseDown:!0}),this.select(t,!e.metaKey)}},{key:"handleMouseOver",value:function(e){this.state.isMouseDown&&(console.log("handleMouseOver "+e),this.select(e,!1))}},{key:"handleMouseUp",value:function(){console.log("handleMouseUp"),this.setState({isMouseDown:!1})}},{key:"setValueOfSelectedCells",value:function(e){console.log("setValueOfSelectedCells "+e),this.clearAllError();var t=this.state.board;t.setValueOfSelectedCells(e,this.state.control.gamePlay,this.state.control.displayOptions.autoCleanUp),this.assignNewBoard(t),this.updateHighlightMatchingNumbers()}},{key:"unsetSelectedCells",value:function(){console.log("unsetSelectedCells"),this.clearAllError();var e=this.state.board;e.unsetSelectedCells(),this.assignNewBoard(e)}},{key:"toggleCornerValuesOfSelectedCells",value:function(e){console.log("toggleCornerValuesOfSelectedCells "+e);var t=this.state.board;t.toggleCornerValuesOfSelectedCells(e),this.assignNewBoard(t)}},{key:"clearCornerValuesOfSelectedCells",value:function(){console.log("clearCornerValuesOfSelectedCells");var e=this.state.board;e.clearCornerValuesOfSelectedCells(),this.assignNewBoard(e)}},{key:"toggleCenterValuesOfSelectedCells",value:function(e){console.log("toggleCenterValuesOfSelectedCells "+e);var t=this.state.board;t.toggleCenterValuesOfSelectedCells(e),this.assignNewBoard(t)}},{key:"clearCenterValuesOfSelectedCells",value:function(){console.log("clearCenterValuesOfSelectedCells");var e=this.state.board;e.clearCenterValuesOfSelectedCells(),this.assignNewBoard(e)}},{key:"clearAllError",value:function(){console.log("clearAllError");var e=this.state.board;e.clearAllErrors(),this.assignNewBoard(e)}},{key:"verifyBoard",value:function(){console.log("verifyBoard");var e=this.state.board;e.clearAllErrors();var t=e.getInvalidCellIds(this.state.control.gamePlay);e.setErrors(t),this.assignNewBoard(e),alert(t.size>0?"Error found :(":"LGTM!")}},{key:"moveSelection",value:function(e,t){for(var l=0,i=0,s=0;s<81;s++)if(this.state.board.cells[s].selected){console.log(this.state);var o=this.state.board.toRowCol(s),a=Object(n.a)(o,2);l=a[0],i=a[1];break}l=(l+e+9)%9,i=(i+t+9)%9,this.select(this.state.board.toCellId(l,i))}},{key:"handleKeyDown",value:function(e){console.log("handleKeyDown, keyCode = "+e.keyCode);var t=!!e.shiftKey,l=!!e.metaKey;if(e.keyCode>=g.a&&e.keyCode<=g.b){var n=String.fromCharCode(e.keyCode);t?this.toggleCornerValuesOfSelectedCells(n):l?(this.toggleCenterValuesOfSelectedCells(n),e.preventDefault()):this.setValueOfSelectedCells(n)}switch(e.keyCode){case g.i:this.unsetSelectedCells();break;case g.c:this.unsetSelectedCells(),this.clearCornerValuesOfSelectedCells(),this.clearCenterValuesOfSelectedCells(),e.preventDefault();break;case g.d:this.moveSelection(1,0);break;case g.k:this.moveSelection(-1,0);break;case g.f:this.moveSelection(0,-1);break;case g.h:this.moveSelection(0,1);break;case g.e:this.clearSelectionAndRestricted();break;case g.m:case g.j:this.undo();break;case g.l:case g.g:this.redo()}}},{key:"handleToggleHighlightRestricted",value:function(){console.log("handleToggleHighlightRestricted");var e=this.state.control;e.toggleHighlightRestricted(),this.setState({control:e})}},{key:"handleToggleHighlightMatchingNumbers",value:function(){console.log("handleToggleHighlightMatchingNumbers");var e=this.state.control;e.toggleHighlightMatchingNumbers(),this.setState({control:e})}},{key:"handleToggleAutoCleanUp",value:function(){console.log("handleToggleAutoCleanUp");var e=this.state.control;e.toggleAutoCleanUp(),this.setState({control:e})}},{key:"handleToggleAntiKnight",value:function(){console.log("handleToggleAntiKnight");var e=this.state.control;e.toggleAntiKnight(),this.setState({control:e})}},{key:"handleToggleAntiKing",value:function(){console.log("handleToggleAntiKing");var e=this.state.control;e.toggleAntiKing(),this.setState({control:e})}},{key:"handleClickFillCenter",value:function(){console.log("handleClickFillCenter");var e=this.state.board;e.fillAllPossibleValues(this.state.control.gamePlay),this.assignNewBoard(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{onKeyDown:function(t){return e.handleKeyDown(t)},tabIndex:0,className:"container",onMouseUp:function(){return e.handleMouseUp()}},c.a.createElement("h1",null,"Sudoku Tool"),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm"},c.a.createElement(f,{board:this.state.board,onClick:function(t,l){return e.handleClick(t,l)},onMouseDown:function(t,l){return e.handleMouseDown(t,l)},onMouseOver:function(t){return e.handleMouseOver(t)},highlightMatching:this.state.highlightMatching})),c.a.createElement("div",{className:"col-sm"},c.a.createElement(y,{control:this.state.control,onClickVerify:function(){return e.verifyBoard()},onClickUndo:function(){return e.undo()},onClickRedo:function(){return e.redo()},onToggleHighlightRestricted:function(){return e.handleToggleHighlightRestricted()},onToggleHighlightMatchingNumbers:function(){return e.handleToggleHighlightMatchingNumbers()},onToggleAutoCleanUp:function(){return e.handleToggleAutoCleanUp()},onToggleAntiKnight:function(){return e.handleToggleAntiKnight()},onToggleAntiKing:function(){return e.handleToggleAntiKing()},onClickFillCenters:function(){return e.handleClickFillCenter()}}))))}}]),l}(c.a.Component));u.a.render(c.a.createElement(S,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.bd8bcb60.chunk.js.map